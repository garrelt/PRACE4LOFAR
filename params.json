{"name":"PRACE4LOFAR","tagline":"A repository for the PRACE4LOFAR project","body":"# Welcome to PRACE4LOFAR Pages.\r\nOn these pages we document the PRACE4LOFAR simulations which were run as part of the PRACE projects 2012061089 and 2014102339.\r\n\r\nThe simulations were performed with two tools: the n-body code cubep3m and the radiative transfer code C2-Ray.\r\n\r\n***\r\n## File Formats\r\nThe results of the project come in the form of several types of files.\r\n\r\nThe following describes the file formats. See Conversion Factors for more information on how to scale the\r\ncontents to physical units.\r\n\r\n### Gridded quantities from the nbody simulations\r\nThese files contain gridded quantities generated from the n-body results using Jun Koda's sph-smooth code.\r\nNormally we generate these for different grid sizes, for example 300^3, 600^3 and 1200^3. The file name does not contain any information about the grid size, normally you should figure out the grid size from the directory the files are in.\r\n\r\nAll these files contain binary streams (no record separators, little endian) and start with a header specifying the size of the data contained. The arrays are stored in fortran style, meaning that the first index varies first: for example for 300^3 (1,1,1), (2,1,1), (3,1,1), .... (300,1,1), (1,2,1), (2,2,1), etc.\r\n\r\n**1) *n_all.dat**\r\n\r\nContains the IGM density fields in cubep3m units. In these density fields the contribution from the halos have been subtracted. These are the density fields which we normally use for reionization simulations.\r\nThe number in the filename is the redshift. \r\n\r\n    * Header of three 4 byte integers: mx,my,mz\r\n    * (mx,my,mz) array of 4 bytes; first index varies first (fortran style).\r\n \r\n**2) *ntot_all.dat**\r\n\r\nContains the total density fields in cubep3m units. The total density field contains the contributions\r\nfrom halos.\r\nThe number in the filename is the redshift.\r\n\r\n    * Header of three 4 byte integers: mx,my,mz\r\n    * (mx,my,mz) array of 4 bytes; first index varies first (fortran style).\r\n\r\n**3) *v_all.dat**\r\n\r\nContains the momentum field in cubep3m units.\r\nNumber in the filename is the redshift.\r\n\r\n    * Header of three 4 byte integers: mx,my,mz\r\n    * (3,mx,my,mz) array of 4 bytes; first index varies first (fortran).\r\n\r\n**4) *c_all.dat**\r\n\r\nContains a measurement of the clumping factor in each cell. Note that the numbers in these files are not the actual clumping factors and need conversion before using them in a simulation.\r\n\r\n    * Header of three 4 byte integers: mx,my,mz\r\n    * (mx,my,mz) array of 4 bytes; first index varies first (fortran style).\r\n \r\n### Halo list quantities from the n-body simulation\r\nThe cubep3m code finds halos using a spherical overdensity method. These halos are recorded in halo lists which contain detailed information about the halos. There are two types of halo list files, depending on whether the run was performed with particle IDs or not. Since particle IDs impact the memory usage of cubep3m not all runs were performed with particle IDs.\r\n\r\nTo use the halos in a reionization simulation we process them into source files. These source files contain the total mass of halos in certain mass bins in each grid cell. Since multiple halos may live in the same grid cell we reduce the number of sources by gridding the halos this way. Each grid size needs its own set of source files.\r\n\r\n**1) *halo.dat**\r\n\r\nContains the full halo lists from cubep3m in cubep3m units. The number in the filename is the redshift. The file is in ASCII character. Each line contains the following halo data\r\n* halo position(:), \r\n* mean position of particles in halo (:), \r\n* mean velocity vector of particles in halo (:)\r\n* angular momentum vector (:)\r\n* velocity dispersion vector (:)\r\n* radius\r\n* mass\r\n* sum of particle masses - do not use\r\n* uncorrected mass - do not use\r\n* var(:) - undocumented 3 vector\r\n\r\n**2) *_resolution_sources.dat**\r\n\r\nContains the source lists. The number in the filename is the redshift. The resolution is indicated by the resolution string: coarsest, coarser, coarse. For example for the 500/h Mpc simulation, coarsest corresponds to the 300^3 grid.\r\nThe file is in ASCII. The first line contains the number of sources in the file. After that each line lists\r\n* cell coordinate\r\n* mass in higher mass bin ('HMACHs', > 10^9 M0)\r\n* mass in lower mass bin ('LMACHs', < 10^9 M0)\r\n\r\n### Reionization simulation quantities\r\nThese are the results of C2Ray simulations. The file formats are either ASCII or unformatted fortran.\r\nUnformatted fortran consists of binary data wrapped in 4 byte record separators. When reading with fortran these record separators are used as a consistency check on the contents of the file. If you read these files with C or python you need to read in the records explicitly.\r\n\r\n**1) xfrac3d***\r\n\r\nContains the hydrogen ionization fraction.\r\nNumber in the filename is the redshift. The file contains two binary (little endian) records:\r\n\r\n    * Header of three 4 byte integers: mx,my,mz\r\n    * (mx,my,mz) array of 8 (!) bytes; first index varies first (fortran).\r\n\r\nNote that there are typically twice as many xfrac3d files than density and velocity files. This is because we take two time steps per redshift slice. This also means that the xfrac3d files look back in redshift:\r\nfor example xfrac3d_8.123.bin and xfrac3d_8.456.bin were both calculated using the density field from 8.789n_all.dat\r\n(and xfrac3d_8.123.bin provides the initial condition for the next time step which uses 8.123n_all.dat as density field).\r\n\r\n**2) IonRates3D***\r\n\r\nContains the photo-ionization rate, often denoted as Gamma in the literature.\r\nNumber in the filename is the redshift. The file contains two binary (little endian) records:\r\n\r\n    * Header of three 4 byte integers: mx,my,mz\r\n    * (mx,my,mz) array of 4 bytes; first index varies first (fortran).\r\n\r\n**3) Photon statistics files**\r\n\r\nTo be continued\r\n\r\n## Scaling (units)\r\n\r\n### Density files\r\n\r\nThese are called \"n_all.dat\" (without halos) and \"ntot_all.dat\" (with halos). \r\n\r\nThe densities are still given in grid masses. To convert to baryonic mass density (proper) multiply with\r\n  \r\n    * rho_crit_0 * Omega_b * (1+z)^3 * (mx/nbox)^3\r\n\r\nwhere\r\n\r\n  * mx is the size of the coarsened density grid that you are reading in (e.g. 300)\r\n  * nbox is the size of the (fine) mesh being used in cubep3m simulation (see below, N-body parameters).\r\n  * rho_crit_0 is the critical density for z=0\r\n  * Omega_b is the baryonic fraction of the energy density of the Universe at z=0\r\n  * z is the redshift\r\n\r\nTo convert to number density of baryons divide by\r\n  \r\n     / (mu*m_p)\r\n\r\nwhere\r\n\r\n  * mu = mean mass of baryons (~1.3) or rather mu=(1.0-abu_he)+4.0*abu_he\r\n  * m_p = mass of hydrogen\r\n  * abu_he = helium abundance by number (assumed to be 0.074)\r\n\r\n### Velocity files\r\n\r\nThese are called \"v_all.dat\" and contain a quantity more like \"momentum\", not velocity.\r\nTo convert to proper velocities in cm/s take the following steps\r\n1. divide by n/8, where 'n' is the density data exactly as it is in the corresponding 'n_all.dat' file.\r\n2. multiply with\r\n\r\n     * boxsize_cm / nbox / 2 * 3 * sqrt(Omega_m) * H0 * (1+z)\r\n\r\nIn this\r\n\r\n * boxsize_cm is the comoving size of the volume (in cm)\r\n * nbox is the size of the (fine) mesh being used in cubep3m simulation (see below, N-body parameters).\r\n * Omega_m is the matter fraction of the energy density of the Universe at z=0\r\n * H0 is the Hubble parameter (in s^-1)\r\n * z is the redshift\r\n\r\n## Cosmology\r\n\r\nWe use these cosmological parameters, based on WMAP3 but consistent with all the later CMB results (including Planck): \r\n* h=0.7\r\n* Omega_m=0.27\r\n* Omega_b=0.044\r\n* Omega_lambda=1.0-Omega_m\r\n* Omega = 1\r\n\r\n## N-body parameters\r\n\r\nThe following are the sets of simulations in PRACE4LOFAR. The value of nbox is needed for the unit conversions.\r\n\r\n* boxsize=47.0  (Box size in Mpc/h comoving)\r\n* number of particles = 1728^3\r\n* nbox=2*1728  !< cells/side (in N-body,fine grid)\r\n\r\n* boxsize=244.0  (Box size in Mpc/h comoving)\r\n* number of particles = 4000^3\r\n* nbox=8000  (cells/side in N-body,fine grid)\r\n\r\n* boxsize=500.0 (Box size in Mpc/h comoving)\r\n* number of particles = 6912^3\r\n* nbox=2*6912 (cells/side in N-body,fine grid)\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}